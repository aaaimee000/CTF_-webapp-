<!-- <!DOCTYPE html>
<html>
<head>
    <title>XSS Challenge</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <h1>XSS Challenge</h1>
    <form method="POST">
        Comment: <input type="text" name="comment">
        <input type="submit" value="Submit">
    </form>
    <h2>Comments:</h2>
    {% for comment in comments %}
        <div>{{ comment | safe }}</div>  <!-- Vulnerable: 'safe' disables escaping -->
    {% endfor %}
</body>
</html>
 -->

<!DOCTYPE html>
<html>
<head>
    <style>
        /* Keep the dystopian theme */
        body { background: #000; color: #00ff9d; font-family: monospace; }
        .comment { border: 1px solid #00ff9d; padding: 10px; margin: 10px; }
    </style>
</head>
<body>
    <h1>OMNITECH AI SURVEILLANCE FEED</h1>
    <form method="POST">
        <input type="text" name="comment" placeholder="Report suspicious activity...">
        <input type="submit" value="Submit">
    </form>

    <h2>Recent Activity:</h2>
    {% for comment in comments %}
        {# Basic filter to block <script> tags (but allows other XSS vectors) #}
        {% set filtered_comment = comment | replace('<script>', '') | replace('</script>', '') %}
        <div class="comment">{{ filtered_comment | safe }}</div>
    {% endfor %}
</body>
</html>

